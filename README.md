# bvcut (black video cut)
Divide video automatically on black screen frames.

動画を真っ黒なフレームを境に分割します。  
また、分割後の動画をエンコードして固定フレームレート(CFR)にします。これはオプションでオフにできます。

beatorajaのコースモードで撮影された動画を、曲の合間に挟まる暗転を利用し、単曲ごとの動画に分割することを目的に作られています。

## Requirement
[ffmpeg](https://www.ffmpeg.org/)

音質のいいAACエンコーダのfdk-aacを使用したい場合、自分でffmpegをビルドする必要があります。  
[ffmpegビルド手順メモ.md](ffmpegビルド手順メモ.md)に手順を書いているので参考にしてください。

## Usage
```
bvcut [-per <float>][-enc=<bool>][-cv <VideoCodec>][-ca <AudioCodec>] <videopath>
```
- per: フレームをチェックする時間間隔[s]。デフォルト: 0.5
- enc: 分割後の動画をエンコードするかどうか。-encの後に=が必須。デフォルト: true
- cv: エンコードに使用するビデオコーデック。ffmpegのオプション準拠。デフォルト: libx264
- ca: エンコードに使用するオーディオコーデック。ffmpegのオプション準拠。デフォルト: libfdk_aac

## Example
```
> bvcut samplevideo.mp4
60 fps, total 200675 frames
200675 / 200675 [-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------] 100.00% 792 p/s
BlackScreen sec: [0 140.51461666666665 282.49585 344.99493333333334 495.00938333333335 643.0405333333333 803.00485 932.0196000000001 1176.51595 1328.4968666666666 1488.0110833333333 1638.0088166666667 1801.5230666666669 1929.5545166666668 2078.0190000000002 2218.5002333333337 2375.4979166666667 2502.9960333333333 2651.4938333333334 2799.5083 2951.0227 3107.0037 3256.0346833333333 3344.5833333333335]
output_0.mp4: 0:00 ~ 2:20
output_1.mp4: 2:20 ~ 4:42
output_2.mp4: 4:42 ~ 5:44
output_3.mp4: 5:44 ~ 8:15
output_4.mp4: 8:15 ~ 10:43
output_5.mp4: 10:43 ~ 13:23
output_6.mp4: 13:23 ~ 15:32
output_7.mp4: 15:32 ~ 19:36
output_8.mp4: 19:36 ~ 22:08
output_9.mp4: 22:08 ~ 24:48
output_10.mp4: 24:48 ~ 27:18
output_11.mp4: 27:18 ~ 30:01
output_12.mp4: 30:01 ~ 32:09
output_13.mp4: 32:09 ~ 34:38
output_14.mp4: 34:38 ~ 36:58
output_15.mp4: 36:58 ~ 39:35
output_16.mp4: 39:35 ~ 41:42
output_17.mp4: 41:42 ~ 44:11
output_18.mp4: 44:11 ~ 46:39
output_19.mp4: 46:39 ~ 49:11
output_20.mp4: 49:11 ~ 51:47
output_21.mp4: 51:47 ~ 54:16
output_22.mp4: 54:16 ~ 55:44
```

エンコードなし
```
> bvcut -enc=false samplevideo.mp4
```

音声コーデックにaacを使用
```
> bvcut -ca aac samplevideo.mp4
```